extends layout
block content
  .container
    .detail-slider
      -var ground_images = ground_info.ground_images
      if(ground_images.ground_images_1)
        .detail_img_wrap(style='background-image:url("' + ground_images.ground_images_1 + '")')
      if(ground_images.ground_images_2)
        .detail_img_wrap(style='background-image:url("' + ground_images.ground_images_2 + '")')
      if(ground_images.ground_images_3)
        .detail_img_wrap(style='background-image:url("' + ground_images.ground_images_3 + '")')
    nav
      .nav.nav-tabs#nav-tab(role='tablist')
        a.nav-item.nav-link#nav-match-list-tab(data-toggle='tab', href='#nav-match-list', role='tab', aria-controls='nav-match-list', aria-selected='true') 풋살매치
        a.nav-item.nav-link#nav-facility-tab(data-toggle='tab', href='#nav-facility', role='tab', aria-controls='nav-facility', aria-selected='false') 시설 및 정보
    #nav-tabContent.tab-content
      //- 매칭 리스트
      #nav-match-list.tab-pane.fade.show.active(role="tabpanel" aria-labelledby="nav-match-list-tab")
        - var n = 0
        each list in match_list       
          ul.list-group.list-group-flush
            h6.mt-3 #{list._id}
            each match in list.list
              li.list-group-item
                .row
                  .col-md-2 #{match.match_time}
                  .col-md-8 
                    h6 #{ground_info.groundName}
                    span #{match.sex === 1 ? "남성":match.sex === -1?"여성":"혼성"}매치
                  .col-md-2
                    - var status ='available';
                    - var remains = match.personnel.max - (match.apply_member.length || 0);
                    if(remains >= 4)
                      - status = 'available'
                    else if(remains >= 1 && remains < 4)
                      - status = 'hurry'
                    else
                      - status = 'full'
                    if(status === 'hurry')
                      button.btn.btn-status.btn-neutral.text-white.p-0(data-status='hurry')
                        h5.m-0.py-1 마감임박
                        .text-warning.bg-white.mx-auto.font-weight-bold(style='border-radius:1rem; width:100px; font-size:13px;') #{remains}자리 남음
                        small.position-relative(style='top:-3px;') #{new Intl.NumberFormat().format(match.match_price)}원
                    else if(status === 'available')
                      button.btn.btn-status.btn-neutral.text-white.p-0(data-status='available')
                        h5.m-0.py-1 신청가능
                        .text-primary.bg-white.mx-auto.font-weight-bold(style='border-radius:1rem; width:100px; font-size:13px;') #{remains}자리 남음
                        small.position-relative(style='top:-3px;') #{new Intl.NumberFormat().format(match.match_price)}원
                    else if(status === 'full')
                      button.btn.btn-status.btn-neutral.text-white(data-status='full')
                        small.m-0 마  감

      //- 시설 및 구장정보
      #nav-facility.tab-pane.fade(role="tabpanel" aria-labelledby="nav-facility-tab") 


block append_js
  script(src='/public_js/ground_match.js')
  script.
    console.log('match_list : ', !{JSON.stringify(match_list)})
    console.log('ground info : ', !{JSON.stringify(ground_info)})